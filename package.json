{
  "name": "panorama-ingenieria",
  "private": true,
  "version": "1.0.0",
  "type": "module",
  "engines": {
    "node": ">=20.0.0 <25.0.0"
  },
  "scripts": {
    "dev": "node scripts/kill-ports.js && concurrently \"npm run dev:api\" \"npm run dev:web\"",
    "dev:client": "vite",
    "dev:api": "cross-env PORT=3001 node server.js",
    "dev:web": "vite --port 5173 --strictPort",
    "dev:all": "powershell -ExecutionPolicy Bypass -File scripts/dev.ps1",
    "kill:ports": "node scripts/kill-ports.js",
    "check:root": "node scripts/check-root-clean.js",
    "build": "vite build",
    "preview": "vite preview",
    "start": "node server.js",
    "deploy": "npm run build && npm run start",
    "historial:build": "node server/scripts/buildHistorialMasivo.js",
    "historial:incremental": "node server/scripts/buildHistorialMasivo.js --incremental",
    "historial:test": "node server/scripts/buildHistorialMasivo.js --limit=10",
    "datos-unificados:obras": "node server/scripts/jobCalendarioObras.js",
    "datos-unificados:eventos": "node server/scripts/jobCalendarioEventos.js",
    "datos-unificados:velocidades": "node server/scripts/jobVelocidadesGoogleRoutes.js",
    "db:migrate": "node server/scripts/dbMigrate.js",
    "db:migrate:win": "powershell -ExecutionPolicy Bypass -File scripts/migrate.ps1",
    "db:migrate:url": "powershell -ExecutionPolicy Bypass -File scripts/migrate.ps1 -DbUrl %DATABASE_URL%",
    "db:schema-check": "node server/scripts/check_db_schema.js",
    "db:full-load": "node server/scripts/dbSetupAndFullLoad.js",
    "etl:nodos-estudios": "node server/scripts/etl_nodos_estudios_from_json.js",
    "etl:nodos:ckan-geojson": "node server/scripts/etl_geojson_nodos_ckan.js",
    "etl:conteos": "node server/scripts/etl_conteos_from_historial.js",
    "etl:fuente-externa-demo": "node server/scripts/etl_fuente_externa_demo.js",
    "etl:fuente-externa-csv": "node server/scripts/etl_fuente_externa_csv.js",
    "etl:cgt": "node server/scripts/fetch_and_convert_cgt_csv.js",
    "etl:sensores-bici": "node server/scripts/etl_sensores_bici.js",
    "etl:velocidades:cgt": "node server/scripts/etl_velocidades_cgt.js",
    "catalogo:sdm-transporte": "node server/scripts/catalogo_sdm_transporte.js",
    "ckan:registrar-aforos": "node server/scripts/ckan_registrar_recursos_aforos.js",
    "datos-abiertos:descargar": "node server/scripts/descargar_datos_abiertos.js",
    "datos-abiertos:descartar-irrelevantes": "node server/scripts/descartar_archivos_irrelevantes.js",
    "datos-abiertos:full": "node server/scripts/ckan_registrar_recursos_aforos.js && node server/scripts/descargar_datos_abiertos.js --procesar",
    "sdp:descargar": "node server/scripts/sdp_descargar_ppru.js",
    "pipeline:full": "node server/scripts/pipeline_full.js",
    "secop:catalogo": "node server/scripts/secop_catalogo_estudios.js",
    "secop:catalogo:headless": "cross-env SECOP_FETCH_ANEXOS=1 node server/scripts/secop_catalogo_estudios.js",
    "secop:catalogo:anexos": "cross-env SECOP_FETCH_ANEXOS=1 SECOP_FETCH_LIMIT=25 SECOP_PLAYWRIGHT_PROXY=socks5://127.0.0.1:9150 node server/scripts/secop_catalogo_estudios.js",
    "secop:descargar": "node server/scripts/secop_descargar_anexos.js",
    "secop:procesar": "node server/scripts/secop_procesar_anexos.js",
    "secop:ejemplo": "node server/scripts/secop_crear_ejemplo_anexos.js",
    "secop:pdf": "node server/scripts/etl_pdf_secop.js",
    "etl:pdf": "node server/scripts/etl_pdf_generico.js",
    "etl:estudios-transito": "node server/scripts/etl_estudios_transito_enriquecido.js",
    "etl:contexto": "node server/scripts/etl_contexto_eventos.js",
    "etl:contexto-zonas": "node server/scripts/etl_contexto_zonas.js",
    "etl:contexto-geocode": "node server/scripts/etl_contexto_geocodificar_eventos.js",
    "ingest:obras": "node server/scripts/ingest_obras_from_calendario.js --apply",
    "ingest:obras:dry": "node server/scripts/ingest_obras_from_calendario.js",
    "ingest:obras:incidentes": "node server/scripts/ingest/ingest_obras_calendario_to_incidentes.js --apply",
    "ingest:obras:incidentes:dry": "node server/scripts/ingest/ingest_obras_calendario_to_incidentes.js",
    "ingest:eventos": "node server/scripts/ingest_eventos_from_contexto.js --apply",
    "ingest:eventos:dry": "node server/scripts/ingest_eventos_from_contexto.js",
    "ingest:eventos:incidentes": "node server/scripts/ingest/ingest_contexto_eventos_to_incidentes.js --apply",
    "ingest:eventos:incidentes:dry": "node server/scripts/ingest/ingest_contexto_eventos_to_incidentes.js",
    "ingest:eventos:web:dry": "node server/scripts/ingest/ingest_eventos_web_to_contexto_eventos.js",
    "ingest:eventos:web:apply": "node server/scripts/ingest/ingest_eventos_web_to_contexto_eventos.js --apply",
    "ingest:agendate:contexto:dry": "node server/scripts/ingest/ingest_agendate_bogota_to_contexto_eventos.js",
    "ingest:agendate:contexto:apply": "node server/scripts/ingest/ingest_agendate_bogota_to_contexto_eventos.js --apply",
    "ingest:agendate:contexto:file:dry": "cross-env AGENDATE_SOURCE_MODE=kmz node server/scripts/ingest/ingest_agendate_bogota_to_contexto_eventos.js",
    "ingest:agendate:contexto:file:apply": "cross-env AGENDATE_SOURCE_MODE=kmz node server/scripts/ingest/ingest_agendate_bogota_to_contexto_eventos.js --apply",
    "ingest:agendate:contexto:force": "cross-env AGENDATE_FORCE_UPDATE=true AGENDATE_SOURCE_MODE=kmz node server/scripts/ingest/ingest_agendate_bogota_to_contexto_eventos.js --apply",
    "ingest:agendate:arcgis:dry": "node server/scripts/ingest/ingest_agendate_arcgis_to_contexto_eventos.js",
    "ingest:agendate:arcgis:apply": "node server/scripts/ingest/ingest_agendate_arcgis_to_contexto_eventos.js --apply",
    "ingest:obras:arcgis": "node server/scripts/ingest/ingest_obras_distritales_arcgis.js --apply",
    "ingest:obras:arcgis:dry": "node server/scripts/ingest/ingest_obras_distritales_arcgis.js",
    "arcgis:domains:sync": "node server/scripts/arcgis/sync_domains.js",
    "backfill:obras-canonical": "node server/scripts/backfill/backfill_obras_canonical.js",
    "export:agendate:arcgis:snapshot": "node server/scripts/export/export_agendate_arcgis_eventos_snapshot.js",
    "ingest:agenda:manual:dry": "node server/scripts/ingest/ingest_agenda_manual_to_contexto_eventos.js",
    "ingest:agenda:manual:apply": "node server/scripts/ingest/ingest_agenda_manual_to_contexto_eventos.js --apply",
    "import:agendate:tabla7:snapshot:dry": "node server/scripts/import/import_agendate_tabla7_raw_to_snapshot.js --dry",
    "import:agendate:tabla7:snapshot:apply": "node server/scripts/import/import_agendate_tabla7_raw_to_snapshot.js",
    "import:agendate:tabla7:snapshot:apply:all": "node server/scripts/import/import_agendate_tabla7_raw_to_snapshot.js --all",
    "import:eventos:bogota:copy": "node server/scripts/import/copy_eventos_bogota_json_from_downloads.js",
    "import:eventos:bogota:contexto:dry": "node server/scripts/import/import_eventos_bogota_json_to_contexto_eventos.js",
    "import:eventos:bogota:contexto:apply": "node server/scripts/import/import_eventos_bogota_json_to_contexto_eventos.js --apply",
    "build:agendate:snapshot:related:dry": "node server/scripts/import/build_snapshot_from_related_records.js --dry",
    "build:agendate:snapshot:related:apply": "node server/scripts/import/build_snapshot_from_related_records.js --apply",
    "ingest:agendate:tabla7:contexto:dry": "node server/scripts/ingest/ingest_agendate_snapshot_tabla7_to_contexto_eventos.js --dry",
    "ingest:agendate:tabla7:contexto:apply": "node server/scripts/ingest/ingest_agendate_snapshot_tabla7_to_contexto_eventos.js --apply",
    "net:diag:agendate": "node server/scripts/net/diagnose_agendate_connectivity.js",
    "net:diag:agendate:arcgis": "powershell -ExecutionPolicy Bypass -File server/scripts/net/diagnose_agendate_arcgis_proxy.ps1",
    "verify:build": "node scripts/verify_build.js",
    "verify:dev:api": "node scripts/verify_dev_api.js",
    "verify:worker": "node scripts/verify_worker.js",
    "verify:all": "npm run verify:build && npm run verify:dev:api && npm run verify:worker",
    "verify:canon": "node server/scripts/verify_canon_counts.js",
    "verify:debug": "node server/scripts/verify/verify_debug_endpoints.js",
    "verify:agendate:eventos": "node server/scripts/verify/verify_agendate_eventos_flow.js",
    "verify:eventos:bogota": "node server/scripts/verify/verify_eventos_bogota_2026_flow.js",
    "diag:agendate:join": "node server/scripts/diagnose/diagnose_agendate_tabla7_join.js",
    "verify:predictor": "node server/scripts/verify/verify_predictor_quality.js",
    "db:seed:festivos": "node server/scripts/seed/seed_festivos_colombia.js",
    "secop:registrar-pdf": "node server/scripts/secop_registrar_pdf_local.js",
    "secop:registrar-carpeta": "node server/scripts/secop_registrar_carpeta.js",
    "seed:aforos-secop": "node server/scripts/seed_aforos_secop.js",
    "scraper:portales": "node server/scripts/scraper_portales.js",
    "stats:fuentes": "node server/scripts/stats_fuentes_aforos.js",
    "estudios:registrar-pdfs": "node server/scripts/registrar_pdf_estudio_transito.js",
    "etl:zonas": "cross-env CKAN_INSECURE_TLS=1 node server/scripts/etl_zonas_ideca.js",
    "etl:cgt:daily": "node server/scripts/fetch_and_convert_cgt_csv.js",
    "etl:sensores-bici:daily": "node server/scripts/etl_sensores_bici.js",
    "validacion:pre-t2": "node server/scripts/validacion_pre_t2.js",
    "test:conectividad": "node server/scripts/test_conectividad.js",
    "test:conectividad:tor": "cross-env PROXY_URL=socks5://127.0.0.1:9150 node server/scripts/test_conectividad.js",
    "sdp:descargar:tor": "cross-env PROXY_URL=socks5://127.0.0.1:9150 node server/scripts/sdp_descargar_ppru.js",
    "sdp:descargar:tor-service": "cross-env PROXY_URL=socks5://127.0.0.1:9050 node server/scripts/sdp_descargar_ppru.js",
    "secop:catalogo:tor": "cross-env PROXY_URL=socks5://127.0.0.1:9150 node server/scripts/secop_catalogo_estudios.js",
    "secop:descargar:tor": "cross-env PROXY_URL=socks5://127.0.0.1:9150 node server/scripts/secop_descargar_anexos.js",
    "secop:descargar:tor:bogota": "cross-env PROXY_URL=socks5://127.0.0.1:9150 node server/scripts/secop_descargar_anexos.js --solo-bogota",
    "secop:extraer-urls": "node server/scripts/secop_extraer_urls_documentos.js",
    "secop:registrar-relevantes": "node server/scripts/secop_registrar_relevantes.js",
    "pipeline:full:tor": "cross-env PROXY_URL=socks5://127.0.0.1:9150 node server/scripts/pipeline_full.js",
    "worker": "node server/worker/index.js",
    "jobs:seed": "node scripts/jobsSeed.js",
    "bootstrap:local": "node scripts/bootstrap_local.js",
    "seed:manifestacion-geocode-test": "node scripts/seed_manifestacion_geocode_test.js"
  },
  "dependencies": {
    "@google/generative-ai": "^0.2.0",
    "@turf/turf": "^7.0.0",
    "adm-zip": "^0.5.16",
    "axios": "^1.6.0",
    "bullmq": "^5.70.1",
    "cheerio": "^1.0.0",
    "cors": "^2.8.5",
    "dotenv": "^16.6.1",
    "esri-leaflet": "^3.0.19",
    "express": "^5.2.1",
    "express-rate-limit": "^7.1.0",
    "fast-xml-parser": "^4.3.2",
    "https-proxy-agent": "^7.0.6",
    "ioredis": "^5.9.3",
    "leaflet": "^1.9.4",
    "leaflet-draw": "^1.0.4",
    "leaflet-fullscreen": "^1.0.2",
    "leaflet.gridlayer.googlemutant": "^0.16.0",
    "lucide-react": "^0.294.0",
    "pg": "^8.11.3",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-helmet-async": "^2.0.5",
    "react-leaflet": "^4.2.1",
    "react-router-dom": "^7.12.0",
    "recharts": "^2.10.0",
    "rss-parser": "^3.13.0",
    "socks-proxy-agent": "^8.0.5",
    "xlsx": "^0.18.5",
    "zustand": "^4.4.0"
  },
  "devDependencies": {
    "@types/leaflet": "^1.9.8",
    "@types/react": "^18.2.43",
    "@types/react-dom": "^18.2.17",
    "@vitejs/plugin-react": "^4.2.1",
    "autoprefixer": "^10.4.16",
    "concurrently": "^9.2.1",
    "cross-env": "^7.0.3",
    "playwright": "^1.44.0",
    "playwright-extra": "^4.3.6",
    "postcss": "^8.4.32",
    "puppeteer-extra-plugin-stealth": "^2.11.2",
    "tailwindcss": "^3.3.6",
    "vite": "^5.0.8"
  }
}
