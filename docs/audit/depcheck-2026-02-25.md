# depcheck — 2026-02-25

Salida completa de `npx depcheck` (sin instalar global). Solo auditoría; no se elimina nada en este PR.

---

## Salida

```
Unused dependencies
* cors
* esri-leaflet
* express-rate-limit
* leaflet-draw
* leaflet-fullscreen
* recharts

Unused devDependencies
* @types/leaflet
* @types/react-dom
* autoprefixer
* postcss
* tailwindcss
```

**Missing dependencies:** ninguna reportada por depcheck.

---

## Interpretación

- **No se eliminará nada en este PR.** Este reporte sirve para decidir en PR-5B qué dependencias son seguras de quitar y cuáles hay que investigar.

- **Posibles falsos positivos (revisar antes de borrar):**
  - **cors:** puede estar usada en `server.js` o en rutas como middleware (require/import dinámico o nombre de paquete distinto).
  - **esri-leaflet / leaflet-draw / leaflet-fullscreen:** usadas en componentes de mapa (Leaflet/React-Leaflet); a veces se referencian en capas o plugins que depcheck no sigue.
  - **express-rate-limit:** middleware en Express; a veces se registra con otro nombre o en código condicional.
  - **recharts:** gráficos en React; puede estar en componentes que depcheck no sigue (lazy, rutas dinámicas).
  - **@types/leaflet, @types/react-dom:** tipos TypeScript/JSX; usados por el compilador o el IDE, no por imports directos en código.
  - **autoprefixer, postcss, tailwindcss:** usados por la cadena de build (Tailwind/PostCSS); depcheck no suele seguir configs en `postcss.config.js` / `tailwind.config.js`.

Cuando tengas la lista de “unused” y “missing” arriba, indica cuáles son seguras para PR-5B y cuáles hay que investigar antes.

---

## Batch 1 (PR-5B) — Eliminadas

En la rama `chore/cleanup-pr5b-remove-unused-deps` se eliminaron estas dependencias (verificación en código + `verify:all` OK):

| Paquete | Motivo |
|--------|--------|
| **cors** | No se usa: en `server.js` CORS se configura a mano con `res.setHeader('Access-Control-Allow-Origin', '*')`, etc. |
| **recharts** | No hay imports en `src/`. |
| **leaflet-fullscreen** | No hay imports ni uso en `src/`. |

Tras `npm install`: 41 paquetes menos (incl. transitivas). `npm run verify:all` pasó.

---

## Falsos positivos (no eliminados en batch 1)

- **leaflet-draw:** sí se usa; `src/index.css` tiene `@import 'leaflet-draw/dist/leaflet.draw.css'`. No quitar.
- **esri-leaflet:** en `vite.config.js` (include) pero sin import directo en `src/`; candidato para batch 2.
- **express-rate-limit:** no aparece en `server.js`; candidato para batch 2 si se confirma que no se usa en ningún route.
- **@types/leaflet, @types/react-dom, autoprefixer, postcss, tailwindcss:** usados por build/IDE; no tocar sin migrar tooling.

---

## Post-batches (estado actual)

Salida de `npx depcheck` en el estado actual del repo (tras batches 1 y 2 según merge en main):

**Unused dependencies:** `esri-leaflet`, `express-rate-limit`, `leaflet-draw`

**Unused devDependencies:** `@types/leaflet`, `@types/react-dom`, `autoprefixer`, `postcss`, `tailwindcss`

**Missing dependencies:** ninguna

### Acción recomendada

| Paquete | Acción | Motivo |
|--------|--------|--------|
| **esri-leaflet** | Eliminar | Ya eliminado en Batch 2 (PR-5C). Si sigue en package.json, pendiente merge. No hay imports en código; ArcGIS vía REST. |
| **express-rate-limit** | Eliminar | Ya eliminado en Batch 2 (PR-5C). No se usa como middleware en server.js ni rutas. |
| **leaflet-draw** | Mantener (falso positivo) | Uso real: `src/index.css` importa `leaflet-draw/dist/leaflet.draw.css`. No quitar. |
| **@types/leaflet** | Mantener (falso positivo) | Tipos para Leaflet; IDE/JSX. |
| **@types/react-dom** | Mantener (falso positivo) | Tipos React DOM; IDE/JSX. |
| **autoprefixer** | Mantener (falso positivo) | Cadena build (PostCSS/Tailwind). |
| **postcss** | Mantener (falso positivo) | Cadena build. |
| **tailwindcss** | Mantener (falso positivo) | Cadena build. |

Para reducir ruido en ejecuciones futuras se añadió `.depcheckrc` (ver raíz del repo) con `ignores` para estos falsos positivos conocidos.
